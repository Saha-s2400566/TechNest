{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <!-- basic -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- mobile metas -->
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <!-- site metas -->
    <title>{% block title %}Technest{% endblock %}</title>
    <meta name="keywords" content="technology, innovation, Technest">
    <meta name="description" content="Technest is your go-to solution for innovative tech solutions and services.">
    <meta name="author" content="Technest Team">
    <!-- bootstrap css -->
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <!-- Futuristic Theme CSS -->
    <link rel="stylesheet" href="{% static 'css/futuristic-theme.css' %}">
    <!-- Quick Wins CSS -->
    <link rel="stylesheet" href="{% static 'css/quick-wins.css' %}">
    <!-- style css -->
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <!-- Responsive -->
    <link rel="stylesheet" href="{% static 'css/responsive.css' %}">
    <link rel="stylesheet" href="{% static 'css/readability.css' %}">
    <!-- Toast Notifications -->
    <link rel="stylesheet" href="{% static 'css/toast-notifications.css' %}">
    <link rel="stylesheet" href="{% static 'css/cart-badge.css' %}">
    <!-- favicon -->
    <link rel="icon" href="{% static 'images/favicon.ico' %}" type="image/x-icon" />
</head>

<body class="main-layout {% block body_class %}{% endblock %}">

    <!-- loader  -->
    <div class="loader_bg">
        <div class="loader"><img src="{% static 'images/loading.gif' %}" alt="#" /></div>
    </div>
    <!-- end loader -->

    <!-- Cookie Banner -->
    <div class="cookie-banner" id="cookieBanner" role="dialog" aria-labelledby="cookieBannerMessage"
        style="display: none;">
        <button class="close" onclick="closeBanner()" aria-label="Close cookie banner">×</button>
        <p id="cookieBannerMessage">
            This website utilizes technologies such as cookies to enable essential site functionality, as well as for
            analytics, personalization, and targeted advertising. You may change your settings at any time or accept the
            default settings.
            <a href="{% url 'policy' %}" aria-label="Read our Privacy Policy">Privacy Policy</a>
        </p>
        <div class="button-group">
            <button onclick="managePreferences()" aria-label="Manage cookie preferences">Manage Preferences</button>
            <button class="accept-all" onclick="acceptAll()" aria-label="Accept all cookies">Accept All</button>
            <button onclick="rejectAll()" aria-label="Reject all non-essential cookies">Reject All</button>
        </div>
    </div>

    <script>
        // Check cookie consent status when the page loads
        document.addEventListener('DOMContentLoaded', function () {
            if (!getCookie('cookieConsent')) {
                document.getElementById('cookieBanner').style.display = 'block';
            }
        });

        function managePreferences() {
            setCookie('cookieConsent', 'essential', 365);
            toast.info('Cookie preferences updated');
            closeBanner();
        }

        function acceptAll() {
            setCookie('cookieConsent', 'all', 365);
            toast.success('All cookies accepted');
            closeBanner();
        }

        function rejectAll() {
            setCookie('cookieConsent', 'essential', 365);
            toast.info('Essential cookies accepted');
            closeBanner();
        }

        function closeBanner() {
            document.getElementById('cookieBanner').style.display = 'none';
        }

        // Helper function to set cookies
        function setCookie(name, value, days) {
            let expires = '';
            if (days) {
                const date = new Date();
                date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
                expires = '; expires=' + date.toUTCString();
            }
            document.cookie = `${name}=${value || ''}${expires}; path=/; SameSite=Lax`;
        }

        // Helper function to get cookies
        function getCookie(name) {
            const nameEQ = `${name}=`;
            const ca = document.cookie.split(';');
            for (let i = 0; i < ca.length; i++) {
                let c = ca[i];
                while (c.charAt(0) === ' ') c = c.substring(1);
                if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);
            }
            return null;
        }
    </script>

    <!-- header -->
    <header class="navbar-futuristic">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-3">
                    <div class="logo">
                        <a href="{% url 'index' %}">
                            <span class="neon-text" style="font-size: 1.5rem; font-weight: 700;">TECHNEST</span>
                        </a>
                    </div>
                </div>
                <div class="col-md-9">
                    <nav style="display: flex; justify-content: flex-end; align-items: center; gap: 1rem;">
                        <!-- Search Bar -->
                        <form action="{% url 'products' %}" method="GET"
                            style="display: flex; align-items: center; margin-right: 1rem;">
                            <input type="text" name="q" placeholder="Search..."
                                style="background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(0, 240, 255, 0.3); color: white; padding: 5px 15px; border-radius: 20px; outline: none; width: 200px; transition: all 0.3s;">
                            <button type="submit"
                                style="background: none; border: none; color: var(--color-neon-cyan); margin-left: -30px; cursor: pointer;">
                                <i class="fa fa-search"></i>
                            </button>
                        </form>

                        <a href="{% url 'index' %}"
                            class="nav-link-futuristic {% if request.resolver_match.url_name == 'index' %}active{% endif %}">Home</a>
                        <a href="{% url 'about' %}"
                            class="nav-link-futuristic {% if request.resolver_match.url_name == 'about' %}active{% endif %}">About</a>
                        <a href="{% url 'products' %}"
                            class="nav-link-futuristic {% if request.resolver_match.url_name == 'products' %}active{% endif %}">Products</a>
                        <a href="{% url 'cart' %}"
                            class="nav-link-futuristic cart-link-container {% if request.resolver_match.url_name == 'cart' %}active{% endif %}">
                            Cart
                            <span id="cart-counter" class="cart-badge" style="display: none;">0</span>
                        </a>
                        <a href="{% url 'contact' %}"
                            class="nav-link-futuristic {% if request.resolver_match.url_name == 'contact' %}active{% endif %}">Contact</a>
                        {% if user.is_authenticated %}
                        <form method="POST" action="{% url 'logout' %}" style="display: inline; margin: 0;">
                            {% csrf_token %}
                            <button type="submit" class="btn-outline"
                                style="padding: 8px 20px; font-size: 0.9rem; background: none; cursor: pointer;">Logout</button>
                        </form>
                        {% else %}
                        <a href="{% url 'sign_in' %}" class="btn-futuristic"
                            style="padding: 8px 20px; font-size: 0.9rem;">Login</a>
                        {% endif %}
                    </nav>
                </div>
            </div>
        </div>
    </header>
    <!-- end header -->

    <!-- Breadcrumb Navigation -->
    {% block breadcrumb %}
    <div class="container">
        <div class="breadcrumb-container"></div>
    </div>
    {% endblock %}

    {% if messages %}
    <div class="container mt-3">
        {% for message in messages %}
        <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        {% endfor %}
    </div>
    {% endif %}

    {% block content %}
    {% endblock %}

    <!-- Newsletter Section -->
    <section style="background: var(--color-space-gray); padding: 3rem 0;">
        <div class="container">
            <div class="newsletter-section">
                <h2 class="newsletter-title">Stay Updated</h2>
                <p class="newsletter-subtitle">Subscribe to our newsletter for the latest tech news and
                    exclusive offers
                </p>
                <form class="newsletter-form">
                    <input type="email" class="newsletter-input" placeholder="Enter your email address" required>
                    <button type="submit" class="newsletter-button">Subscribe</button>
                </form>
            </div>
        </div>
    </section>

    <!-- footer -->
    <footer
        style="background: var(--color-space-gray); padding: 2rem 0; margin-top: 0; border-top: 1px solid rgba(0, 240, 255, 0.2);">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-4 text-center text-md-left mb-3 mb-md-0">
                    <span class="neon-text" style="font-size: 1.3rem; font-weight: 700;">TECHNEST</span>
                    <p style="color: var(--color-mid-gray); margin: 0.5rem 0 0 0; font-size: 0.9rem;">
                        Cutting-edge
                        technology solutions</p>
                </div>

                <div class="col-md-4 text-center mb-3 mb-md-0">
                    <div style="display: flex; gap: 1.5rem; justify-content: center; flex-wrap: wrap;">
                        <a href="{% url 'index' %}"
                            style="color: var(--color-mid-gray); text-decoration: none; font-size: 0.9rem; transition: color 0.3s;">Home</a>
                        <a href="{% url 'about' %}"
                            style="color: var(--color-mid-gray); text-decoration: none; font-size: 0.9rem; transition: color 0.3s;">About</a>
                        <a href="{% url 'products' %}"
                            style="color: var(--color-mid-gray); text-decoration: none; font-size: 0.9rem; transition: color 0.3s;">Products</a>
                        <a href="{% url 'contact' %}"
                            style="color: var(--color-mid-gray); text-decoration: none; font-size: 0.9rem; transition: color 0.3s;">Contact</a>
                        <a href="{% url 'policy' %}"
                            style="color: var(--color-mid-gray); text-decoration: none; font-size: 0.9rem; transition: color 0.3s;">Privacy</a>
                    </div>
                </div>

                <div class="col-md-4 text-center text-md-right">
                    <div style="display: flex; gap: 0.75rem; justify-content: center; align-items: center;">
                        <a href="#"
                            style="width: 35px; height: 35px; display: inline-flex; align-items: center; justify-content: center; border: 1px solid var(--color-neon-cyan); border-radius: 50%; color: var(--color-neon-cyan); text-decoration: none; transition: all 0.3s; font-size: 0.9rem;">
                            <i class="fa fa-facebook-f"></i>
                        </a>
                        <a href="#"
                            style="width: 35px; height: 35px; display: inline-flex; align-items: center; justify-content: center; border: 1px solid var(--color-neon-cyan); border-radius: 50%; color: var(--color-neon-cyan); text-decoration: none; transition: all 0.3s; font-size: 0.9rem;">
                            <i class="fa fa-twitter"></i>
                        </a>
                        <a href="#"
                            style="width: 35px; height: 35px; display: inline-flex; align-items: center; justify-content: center; border: 1px solid var(--color-neon-cyan); border-radius: 50%; color: var(--color-neon-cyan); text-decoration: none; transition: all 0.3s; font-size: 0.9rem;">
                            <i class="fa fa-instagram"></i>
                        </a>
                    </div>
                    <p style="color: var(--color-mid-gray); margin: 0.75rem 0 0 0; font-size: 0.85rem;">
                        © 2024 TECHNEST
                    </p>
                </div>
            </div>
        </div>
    </footer>
    <!-- end footer -->

    <!-- Javascript files-->
    <script src="{% static 'js/jquery.min.js' %}"></script>
    <script src="{% static 'js/popper.min.js' %}"></script>
    <!-- Toast Notifications -->
    <script src="{% static 'js/toast-notifications.js' %}"></script>
    <script src="{% static 'js/cart-badge.js' %}"></script>
    <script src="{% static 'js/quick-wins.js' %}"></script>
    <script>
        // Hide loader when page is fully loaded
        $(window).on('load', function () {
            setTimeout(function () {
                $('.loader_bg').fadeOut('slow');
            }, 500);
        });

        $(document).ready(function () {
            $(".fancybox").fancybox({
                openEffect: "none",
                closeEffect: "none"
            });

            $(".zoom").hover(function () {
                $(this).addClass('transition');
            }, function () {
                $(this).removeClass('transition');
            });
        });
    </script>
    {% block extra_scripts %}{% endblock %}
</body>

</html>